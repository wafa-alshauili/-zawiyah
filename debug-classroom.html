<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ØªØ´Ø®ÙŠØµ Ø§Ù„ØºØ±ÙØ© Ø§Ù„ØµÙÙŠØ©</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; }
.debug { background: #f0f0f0; padding: 10px; margin: 10px 0; border-left: 4px solid #007cba; }
.success { background: #d4edda; color: #155724; }
.error { background: #f8d7da; color: #721c24; }
button { margin: 5px; padding: 8px 16px; }
</style>
</head>
<body>
<h1>ğŸ” ØªØ´Ø®ÙŠØµ Ù…Ø´ÙƒÙ„Ø© Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØºØ±ÙØ© Ø§Ù„ØµÙÙŠØ©</h1>

<div class="debug">
<h3>Ø§Ù„Ø®Ø·ÙˆØ© 1: ÙØ­Øµ ÙˆØ¬ÙˆØ¯ "ØºØ±ÙØ© ØµÙÙŠØ©" ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ø§Ø¹Ø§Øª</h3>
<button onclick="checkRooms()">ÙØ­Øµ Ø§Ù„Ù‚Ø§Ø¹Ø§Øª</button>
<div id="rooms-result"></div>
</div>

<div class="debug">
<h3>Ø§Ù„Ø®Ø·ÙˆØ© 2: Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ø®ØªÙŠØ§Ø± "ØºØ±ÙØ© ØµÙÙŠØ©"</h3>
<select id="room-test" onchange="testRoomSelection()">
  <option value="">-- Ø§Ø®ØªØ± Ù‚Ø§Ø¹Ø© --</option>
  <option value="Ø§Ù„Ù…Ø®ØªØ¨Ø±">Ø§Ù„Ù…Ø®ØªØ¨Ø±</option>
  <option value="ØºØ±ÙØ© ØµÙÙŠØ©">ØºØ±ÙØ© ØµÙÙŠØ©</option>
</select>
<div id="selection-result"></div>
</div>

<div class="debug">
<h3>Ø§Ù„Ø®Ø·ÙˆØ© 3: Ù…Ø­Ø§ÙƒØ§Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ Ù…Ø¹ Ø£Ø²Ø±Ø§Ø±</h3>
<button onclick="createTestTable()">Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ Ø§Ø®ØªØ¨Ø§Ø±</button>
<div id="table-container"></div>
</div>

<div class="debug">
<h3>Ø§Ù„Ø®Ø·ÙˆØ© 4: ÙØ­Øµ localStorage</h3>
<button onclick="checkLocalStorage()">ÙØ­Øµ localStorage</button>
<div id="storage-result"></div>
</div>

<script>
let selectedRoom = null;

function checkRooms() {
  // Ù…Ø­Ø§ÙƒØ§Ø© Ù†ÙØ³ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø£ØµÙ„ÙŠ
  const savedRooms = localStorage.getItem('school_rooms');
  const rooms = savedRooms ? JSON.parse(savedRooms) : ['Ø§Ù„Ù…Ø®ØªØ¨Ø±', 'Ù‚Ø§Ø¹Ø© Ø§Ù„Ø­Ø§Ø³ÙˆØ¨', 'Ø§Ù„Ù…ÙƒØªØ¨Ø©', 'Ø§Ù„Ù‚Ø§Ø¹Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©', 'Ø§Ù„Ù‚Ø§Ø¹Ø© Ø§Ù„Ø°ÙƒÙŠØ©', 'ØºØ±ÙØ© ØµÙÙŠØ©'];
  
  const result = document.getElementById('rooms-result');
  result.innerHTML = `
    <div class="success">
      <strong>âœ… Ø§Ù„Ù‚Ø§Ø¹Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©:</strong><br>
      ${rooms.map((room, index) => `${index + 1}. ${room}`).join('<br>')}
      <br><br>
      <strong>Ù‡Ù„ "ØºØ±ÙØ© ØµÙÙŠØ©" Ù…ÙˆØ¬ÙˆØ¯Ø©ØŸ</strong> ${rooms.includes('ØºØ±ÙØ© ØµÙÙŠØ©') ? 'âœ… Ù†Ø¹Ù…' : 'âŒ Ù„Ø§'}
    </div>
  `;
}

function testRoomSelection() {
  selectedRoom = document.getElementById('room-test').value;
  const result = document.getElementById('selection-result');
  
  if (selectedRoom === 'ØºØ±ÙØ© ØµÙÙŠØ©') {
    result.innerHTML = `
      <div class="success">
        âœ… ØªÙ… Ø§Ø®ØªÙŠØ§Ø± "ØºØ±ÙØ© ØµÙÙŠØ©" Ø¨Ù†Ø¬Ø§Ø­!<br>
        selectedRoom = "${selectedRoom}"
      </div>
    `;
  } else if (selectedRoom) {
    result.innerHTML = `
      <div class="error">
        âš ï¸ ØªÙ… Ø§Ø®ØªÙŠØ§Ø± "${selectedRoom}" - Ù„ÙŠØ³Øª ØºØ±ÙØ© ØµÙÙŠØ©
      </div>
    `;
  } else {
    result.innerHTML = `<div>Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ù‚Ø§Ø¹Ø©</div>`;
  }
}

function createTestTable() {
  if (!selectedRoom) {
    alert('Ø§Ø®ØªØ± "ØºØ±ÙØ© ØµÙÙŠØ©" Ø£ÙˆÙ„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø®Ø·ÙˆØ© 2');
    return;
  }
  
  const container = document.getElementById('table-container');
  container.innerHTML = `
    <h4>Ø¬Ø¯ÙˆÙ„ Ø§Ø®ØªØ¨Ø§Ø± Ù„Ù„ØºØ±ÙØ©: ${selectedRoom}</h4>
    <table border="1" style="width: 100%; border-collapse: collapse;">
      <thead>
        <tr><th>Ø§Ù„ÙŠÙˆÙ…</th><th>Ø§Ù„Ø­ØµØ© Ø§Ù„Ø£ÙˆÙ„Ù‰</th><th>Ø§Ù„Ø­ØµØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©</th></tr>
      </thead>
      <tbody>
        <tr>
          <td>Ø§Ù„Ø£Ø­Ø¯</td>
          <td id="test-cell-1" data-time="sun-1" style="padding: 20px; border: 1px solid #ddd;"></td>
          <td id="test-cell-2" data-time="sun-2" style="padding: 20px; border: 1px solid #ddd;"></td>
        </tr>
      </tbody>
    </table>
  `;
  
  // ØªØ·Ø¨ÙŠÙ‚ Ù†ÙØ³ Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£ØµÙ„ÙŠ
  const cells = container.querySelectorAll('td[data-time]');
  cells.forEach(cell => {
    if (selectedRoom === 'ØºØ±ÙØ© ØµÙÙŠØ©') {
      const timeSlot = cell.getAttribute('data-time');
      cell.innerHTML = `
        <div style="text-align: center; padding: 15px;">
          <button onclick="testButtonClick('${timeSlot}')" 
                  style="background: #4caf50; color: white; border: none; padding: 8px 16px; border-radius: 4px; font-size: 0.85em; cursor: pointer; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">
            â• Ø­Ø¬Ø² Ø¬Ø¯ÙŠØ¯
          </button>
        </div>
      `;
      cell.style.backgroundColor = '#f9f9f9';
    } else {
      cell.innerHTML = 'Ø®Ø§Ù†Ø© Ø¹Ø§Ø¯ÙŠØ©';
      cell.style.backgroundColor = '';
    }
  });
}

function testButtonClick(timeSlot) {
  alert(`âœ… Ø§Ù„Ø²Ø± ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­!\nØ§Ù„ÙØªØ±Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©: ${timeSlot}`);
}

function checkLocalStorage() {
  const result = document.getElementById('storage-result');
  const rooms = localStorage.getItem('school_rooms');
  const reservations = localStorage.getItem('school_reservations');
  
  result.innerHTML = `
    <div class="success">
      <strong>ğŸ“¦ Ù…Ø­ØªÙˆÙŠØ§Øª localStorage:</strong><br><br>
      <strong>school_rooms:</strong> ${rooms || 'ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯'}<br><br>
      <strong>school_reservations:</strong> ${reservations ? JSON.parse(reservations).length + ' Ø­Ø¬Ø²' : 'ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯'}<br><br>
      <button onclick="localStorage.clear(); alert('ØªÙ… Ù…Ø³Ø­ localStorage');">Ù…Ø³Ø­ localStorage</button>
    </div>
  `;
}

// ØªØ´ØºÙŠÙ„ Ø§Ù„ÙØ­Øµ Ø§Ù„Ø£ÙˆÙ„ÙŠ
window.onload = function() {
  checkRooms();
  checkLocalStorage();
};
</script>

</body>
</html>